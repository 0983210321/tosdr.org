<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Terms of Service; Didn&apos;t Read</title>
		<meta name="description" content="Nobody wants to read the long Terms of Service many websites have. But it is important to understand what they say &ndash; these ratings make it easier.">
		<meta name="author" content="Unhosted">

		<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

		<link href="css/bootstrap.css" rel="stylesheet">
		<link href="css/custom.css" rel="stylesheet">

		<link rel="shortcut icon" href="img/favicon.ico">
		<!--<link rel="apple-touch-icon" href="apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="apple-touch-icon-114x114.png">-->

		<script src="js/jquery-1.7.1.min.js"></script>
		
    <script>
      function getList(cb) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/points.json', true);
        xhr.onreadystatechange = function() {
          if(xhr.readyState == 4) {
            var text = xhr.responseText;
            cb(JSON.parse(text));
          }
        }
        xhr.send();
      }

      function getQuote(site, date, text, from, to, cb) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/scrapes/'+site+'/'+date+'/'+text+'/', true);
        xhr.onreadystatechange = function() {
          if(xhr.readyState == 4) {
            var text = xhr.responseText;
            cb(text.substring(from, to));
          }
        }
        xhr.send();
      }
      function getWeights(cb) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/weights.json', true);
        xhr.onreadystatechange = function() {
          if(xhr.readyState == 4) {
            var text = xhr.responseText;
            cb(JSON.parse(text));
          }
        }
        xhr.send();
      }
      function getRates(cb) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '/rates.json', true);
        xhr.onreadystatechange = function() {
          if(xhr.readyState == 4) {
            var text = xhr.responseText;
            cb(JSON.parse(text));
          }
        }
        xhr.send();
      }
      function go() {
        getList(function(list) {
          var i, j, thisSite, thisCrit;
          var sites = {};
          var crits = {};
          for(i = 0; i < list.length; i++) {
            sites[list[i].site]=0;
            crits[list[i].crit]=true;
            
          }
          var str = '<table><tr><td>site:</td><td>points:</td>';
          for(thisCrit in crits) {
            str += '<td>'+thisCrit+'</td>';
          }
          str += '</tr>';
          for(thisSite in sites) {
            str += '<tr><td>'+thisSite+'</td><td id="points_'+thisSite+'"></td>';
            for(thisCrit in crits) {
              str += '<td bgcolor="grey" id="cell_'+thisSite+'_'+thisCrit+'" onclick="getQuotes(\''+thisSite+'\', \''+thisCrit+'\');"></td>';
            }
            str += '</tr>';
          }
          document.getElementById('viz').innerHTML = str;
          getWeights(function(weights) {
            for(i = 0; i < list.length; i++) {
              document.getElementById('cell_'+list[i].site+'_'+list[i].crit).setAttribute('bgcolor', list[i].read);
              document.getElementById('cell_'+list[i].site+'_'+list[i].crit).innerHTML = weights[list[i].crit][list[i].read]; 
            }
            for(thisSite in sites) {
              for(thisCrit in crits) {
                sites[thisSite] += parseInt(document.getElementById('cell_'+thisSite+'_'+thisCrit).innerHTML);
              }
              document.getElementById('points_'+thisSite).innerHTML = sites[thisSite];
            }
            getRates(function(rates) {
              var thisRate;
              for(thisSite in sites) {
                for(thisRate in rates) {
                  if(sites[thisSite] >= rates[thisRate]) {
                    document.getElementById('rating_'+thisSite).innerHTML = thisRate;
                    break;
                  }
                }
              }
            });
          });
        });
      }
      function getQuotes(site, crit) {
        getList(function(list) {
          var i, j;
          for(i = 0; i< list.length; i++) {
            if((list[i].site == site) && (list[i].crit == crit)) {
              document.getElementById('det').innerHTML = '<h2>Discussion page for '+site+' / '+crit+'</h2>';
              for(j = 0; j < list[i].quotes.length; j++) {
                getQuote(site, list[i].date, list[i].quotes[j].text, list[i].quotes[j].from, list[i].quotes[j].to, function(text) {
                  document.getElementById('det').innerHTML = document.getElementById('det').innerHTML
                    //+ '<br>Quote char '+list[i].quotes[j].from
                    //+ ' to '+list[i].quotes[j].to
                    //+ ': <a href="/scrapes/'+site+'/'+list[i].date+'/'+list[i].text+'/index.html">"'+text+'"</a>';
                    +'<br>'+text+'<br><input type="submit" value="back" onclick="goBack();">';
                  document.getElementById('det').style.display='block';
                  document.getElementById('viz').style.display='none';
                });
              }
            }
          }
        });
      }
      function goBack() {
        document.getElementById('viz').style.display='block';
        document.getElementById('det').style.display='none';
      }
    </script>
	</head>

	<body onload="go();">

		<div class="topbar">
			<div class="fill">
				<div class="container">
					<a class="brand" href="#">ToS;DR</a>
					<ul class="nav">
						<li><a href="#classification">Classification</a></li>
						<li><a href="#categories">Categories</a></li>
						<li><a href="#ratings">Ratings</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="container">

			<!-- Main hero unit for a primary marketing message or call to action -->
			<div class="hero-unit">
				<h1>Terms of Service; Didn&apos;t Read</h1>
				<p>Nobody wants to read the long Terms of Service many websites have.<br />But it is important to understand what they say &ndash; these ratings make it easier.</p>
				<p>
					<!--<a href="#ratings" class="btn primary large">See the ratings</a>-->
					<a href="http://webchat.freenode.net/?channels=unhosted" class="btn large"><img src="img/irccloud.png" /> Join the conversation</a>
					<a href="http://github.com/unhosted/ToS-DR" class="btn large"><img src="img/github.png" /> Help coding</a>
				</p>
			</div>

			<section id="classification">
				<div class="page-header"><h1>Classification <small>how services are rated</small></h1></div>
				<p>Each service is rated according to the categories below as either <span class="label success">good</span>, <span class="label warning">mediocre</span> or <span class="label important">bad</span> depending on their terms of service and privacy policies. These individual ratings are then added up to judge the service as a whole.</p>
				<span class="label success" title="good"></span><p>if 80% good or more</p>
				<span class="label warning" title="mediocre"></span><p>if 50% good or more</p>
				<span class="label important" title="bad"></span><p>if below 50% good</p>
			</section>

			<section id="categories">
				<div class="page-header"><h1>Categories <small>10 for now, let us know if they make sense or can be simplified</small></h1></div>

				<div class="row">
					<div class="span8">
						<h2>Ownership</h2>
						<span class="label success" title="good"></span><p>You license us to use your data only for the purpose of offering this service.</p>
						<span class="label warning" title="mediocre"></span><p>We get a license to reuse and resell your data, but will still attribute ownership to you.</p>
						<span class="label important" title="bad"></span><p>We become the owners of your data.</p>
					</div>
					<div class="span8">
						<h2>Location of court of law</h2>
						<span class="label success" title="good"></span><p>The court of law of the service is located in a country which respects human rights &amp; digital rights.</p>
						<span class="label warning" title="mediocre"></span><p>The court of law of the service is located in a country which is behind on digital rights.</p>
						<span class="label important" title="bad"></span><p>The court of law of the service is located in a country which is known for censoring and oppression.</p>
					</div>
				</div>

				<div class="row">
					<div class="span8">
						<h2>You end the service</h2>
						<span class="label success" title="good"></span><p>Both your primary and secondary data will be removed after you close your account.</p>
						<span class="label warning" title="mediocre"></span><p>Your data will be kept for a short time for the purpose of restoring your account at a later time.</p>
						<span class="label important" title="bad"></span><p>A copy of your data will be kept even if you don&apos;t want it.</p>
					</div>
					<div class="span8">
						<h2>They end the service</h2>
						<span class="label success" title="good"></span><p>Your account will not be suspended or censored, unless required to do so by law.</p>
						<span class="label warning" title="mediocre"></span><p>Your account might be suspended or censored at any time, but there is an appeal procedure.</p>
						<span class="label important" title="bad"></span><p>There is no appeal procedure in case the service is ended or censored.</p>
					</div>
				</div>

				<div class="row">
					<div class="span8">
						<h2>Third parties</h2>
						<span class="label success" title="good"></span><p>Neither your primary nor your secondary data will be given to third parties.</p>
						<span class="label warning" title="mediocre"></span><p>Aggregated data might be used for use by third parties, but then you will not be identifiable.</p>
						<span class="label important" title="bad"></span><p>Your personal data will be given to third parties.</p>
					</div>
					<div class="span8">
						<h2>Law enforcement</h2>
						<span class="label success" title="good"></span><p>You will get a chance to defend yourself when law enforcement requests access to your data.</p>
						<span class="label warning" title="mediocre"></span><p>Your data will only be given away in case of a subpoena.</p>
						<span class="label important" title="bad"></span><p>Your data might be given to law enforcement upon request.</p>
					</div>
				</div>
				
				<div class="row">
					<div class="span8">
						<h2>Equality</h2>
						<span class="label success" title="good"></span><p>The service is blind to your location, race, gender, nationality, residence, political views, religion, sexual orientation, and criminal record.</p>
						<span class="label warning" title="mediocre"></span><p>They are actively and demonstrably working to make this service available to more human beings, regardless of their location, race, gender, nationality, residence, political views, religion, sexual orientation, and criminal record.</p>
						<span class="label important" title="bad"></span><p>Whether this service is available to you may depend on your location, race, gender, nationality, residence, political views, religion, sexual orientation, or criminal record.</p>
					</div>
					<div class="span8">
						<h2>Anonymity</h2>
						<span class="label success" title="good"></span><p>You can use a pseudonym and don&apos;t have to give out your personal info.</p>
						<span class="label warning" title="mediocre"></span><p>It is allowed to use nicknames towards other users, as long as you give your real identity to the service.</p>
						<span class="label important" title="bad"></span><p>You have to give out your real identity, uniquely linking your account to you as a physical person.</p>
					</div>
				</div>

				<div class="row">
					<div class="span8">
						<h2>Data liberation</h2>
						<span class="label success" title="good"></span><p>You can export and import all your data to open formats usable with other services.</p>
						<span class="label warning" title="mediocre"></span><p>You can export your primary data, but only to a format that even they don&apos;t support for import.</p>
						<span class="label important" title="bad"></span><p>You can not export your data.</p>
					</div>
					<div class="span8">
						<h2>Distribution</h2>
						<span class="label success" title="good"></span><p>This service is distributed; using a a different instance will not give you significant loss of interaction with other users.</p>
						<span class="label warning" title="mediocre"></span><p>The software behind this service is freely licensed. Be aware though, that each node forms a restrictive island of user interaction.</p>
						<span class="label important" title="bad"></span><p>This is the only instance of this service. Either the source code is secret, or you&apos;re not allowed to run your own instance of it.</p>
					</div>
				</div>

			</section>

			<section id="ratings"><!-- TODO: merge viz.html in here -->
				<div class="page-header"><h1>Ratings (example values!) <small>seriously, this part is only an example!</small></h1></div>
				<!--<table><thead>
					<tr>
						<th>Site</th>
						<th>Rating</th>
						<th><abbr title="Attribution">Attr.</abbr></th>
						<th><abbr title="Privacy">Priv.</a></th>
						<th><abbr title="You end the service">You&nbsp;end</abbr></th>
						<th><abbr title="They end the service">They&nbsp;end</abbr></th>
						<th><abbr title="Third parties">3rd&nbsp;P.</abbr></th>
						<th><abbr title="Law enforcement">Law</abbr></th>
						<th><abbr title="Censorship">Cens.</abbr></th>
						<th><abbr title="Location of court of law">Loc.</abbr></th>
						<th><abbr title="Equality">Eq.</abbr></th>
						<th><abbr title="Anonymity">Anon.</abbr></th>
						<th><abbr title="Data liberation">Data</abbr></th>
						<th><abbr title="Distribution">Dist.</abbr></th>
					</tr>
					</thead>
					<tbody>
					<tr>
						<td><img src="http://static.ak.fbcdn.net/rsrc.php/yi/r/q9U99v3_saj.ico" /> facebook.com</td>
						<td id="rating_facebook.com"><span id="points_facebook.com" class="label important" title="bad">36%</span></td>
						<td id="cell_facebook.com_BY" onclick="getQuotes('facebook.com', 'BY');"><span class="label success" title="good"></span></td>
						<td id="cell_facebook.com_DEL" onclick="getQuotes('facebook.com', 'DEL');"><span class="label success" title="good"></span></td>
						<td id="cell_facebook.com_END" onclick="getQuotes('facebook.com', 'END');"><span class="label important" title="bad"></span></td>
						<td id="cell_facebook.com_OPP" onclick="getQuotes('facebook.com', 'OPP');"><span class="label important" title="bad"></span></td>
						<td id="cell_facebook.com_GOV" onclick="getQuotes('facebook.com', 'GOV');"><span class="label important" title="bad"></span></td>
						<td id="cell_facebook.com_LOC" onclick="getQuotes('facebook.com', 'LOC');"><span class="label warning" title="mediocre"></span></td>
						<td id="cell_facebook.com_EQ" onclick="getQuotes('facebook.com', 'EQ');"><span class="label success" title="good"></span></td>
						<td id="cell_facebook.com_ANON" onclick="getQuotes('facebook.com', 'ANON');"><span class="label important" title="bad"></span></td>
						<td id="cell_facebook.com_DL" onclick="getQuotes('facebook.com', 'DL');"><span class="label success" title="good"></span></td>
						<td id="cell_facebook.com_DIST" onclick="getQuotes('facebook.com', 'DIST');"><span class="label important" title="bad"></span></td>
					</tr>

					<tr>
						<td><img src="http://dropbox.com/static/images/favicon.ico" /> dropbox.com</td>
						<td id="rating_dropbox.com"><span id="points_dropbox.com" class="label warning" title="mediocre">64%</span></td>
						<td id="cell_dropbox.com_BY" onclick="getQuotes('dropbox.com', 'BY');"><span class="label success" title="good"></span></td>
						<td id="cell_dropbox.com_DEL" onclick="getQuotes('dropbox.com', 'DEL');"><span class="label important" title="bad"></span></td>
						<td id="cell_dropbox.com_END" onclick="getQuotes('dropbox.com', 'END');"><span class="label success" title="good"></span></td>
						<td id="cell_dropbox.com_OPP" onclick="getQuotes('dropbox.com', 'OPP');"><span class="label success" title="good"></span></td>
						<td id="cell_dropbox.com_GOV" onclick="getQuotes('dropbox.com', 'GOV');"><span class="label important" title="bad"></span></td>
						<td id="cell_dropbox.com_LOC" onclick="getQuotes('dropbox.com', 'LOC');"><span class="label warning" title="mediocre"></span></td>
						<td id="cell_dropbox.com_EQ" onclick="getQuotes('dropbox.com', 'EQ');"><span class="label important" title="bad"></span></td>
						<td id="cell_dropbox.com_ANON" onclick="getQuotes('dropbox.com', 'ANON');"><span class="label success" title="good"></span></td>
						<td id="cell_dropbox.com_DL" onclick="getQuotes('dropbox.com', 'DL');"><span class="label success" title="good"></span></td>
						<td id="cell_dropbox.com_DIST" onclick="getQuotes('dropbox.com', 'DIST');"><span class="label important" title="bad"></span></td>
						</tr>

					<tr>
						<td><img src="http://joindiaspora.com/favicon.png" /> joindiaspora.com</td>
						<td id="rating_joindiaspora.com"><span id="points_joindiaspora.com" class="label success" title="good">95%</span></td>
						<td id="cell_joindiaspora.com_BY" onclick="getQuotes('joindiaspora.com', 'BY');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_DEL" onclick="getQuotes('joindiaspora.com', 'DEL');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_END" onclick="getQuotes('joindiaspora.com', 'END');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_OPP" onclick="getQuotes('joindiaspora.com', 'OPP');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_GOV" onclick="getQuotes('joindiaspora.com', 'GOV');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_LOC" onclick="getQuotes('joindiaspora.com', 'LOC');"><span class="label warning" title="mediocre"></span></td>
						<td id="cell_joindiaspora.com_EQ" onclick="getQuotes('joindiaspora.com', 'EQ');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_ANON" onclick="getQuotes('joindiaspora.com', 'ANON');"><span class="label success" title="good"></span></td>
						<td id="cell_joindiaspora.com_DL" onclick="getQuotes('joindiaspora.com', 'DL');"><span class="label warning" title="mediocre"></span></td>
						<td id="cell_joindiaspora.com_DIST" onclick="getQuotes('joindiaspora.com', 'DIST');"><span class="label success" title="good"></span></td>
						</tr>
					</tbody></table>-->
			</section>
      <div id="viz"></div>
      <div id="det" style="display:none;"></div>

			<footer>
				<p><strong>Terms of Service; Didn&apos;t Read</strong> is a project by <a href="http://unhosted.org">Unhosted</a>, inspired by Aza Raskin&apos;s <a href="http://azarask.in/blog/post/privacy-icons/">Privacy Icons</a> and EFF&apos;s <a href="http://tosback.org">TOSBack</a>.</p>
			</footer>

		</div> <!-- /container -->

		<script src="js/bootstrap-twipsy.js"></script>
		<script>
			$(function() { $('a[title!=""]').twipsy({live:true})});
			$(function() { $('abbr[title!=""]').twipsy({live:true})});
		</script>

	</body>
</html>
